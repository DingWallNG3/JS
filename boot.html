<!doctype html>
<html lang="ko">
    <head>
        <!-- Required meta tags -->
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

        <!-- Bootstrap CSS -->
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/css/bootstrap.min.css" integrity="sha384-zCbKRCUGaJDkqS1kPbPd7TveP5iyJE0EjAuZQTgFLD2ylzuqKfdKlfG/eSrtxUkn" crossorigin="anonymous">
        <link rel="stylesheet" href="main.css">
        <title>Shirts Studio</title>
        <script src="https://code.jquery.com/jquery-3.6.0.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/hammer.js/2.0.8/hammer.min.js" integrity="sha256-eVNjHw5UeU0jUqPPpZHAkU1z4U+QFBBY488WvueTm88=" crossorigin="anonymous"></script>

    </head>
    <body>
        <div class='left-menu'>
            <p>Menu Title</p>
        </div>



        <!-- 모달창 -->
        <div class='black-background slide-up'>
            <div class='white-background'>
                <p>로그인하세요</p>
                <form action="login.php">
                    <div class="form-group">
                        <input type="email" class="form-control" placeholder="Email" id="email">
                        <p id='email-alert'>이메일이 빈칸입니다.</p>
                    </div>
                    <div class="form-group">
                        <input type="password" class="form-control" placeholder="Password" id='password'>
                        <p id='pw-alert'>패스워드가 빈칸입니다.</p>
                    </div>
                    <button type="submit" class="btn btn-primary">전송</button>
                    <button class="btn btn-danger" id='close'>닫기</button>
                </form>
            </div>
        </div>
        <script>
            $('.black-background').on('click', function(e) {
                // 만약에, 지금 클릭한게 검은 배경일 때만 
                // 모달창을 숨기기
                // e.target; 지금 실제로 클릭한 요소
                // e.currentTarget; 지금 이벤트리스너가 달린 곳
                // $(this);
                // e.preventDefault(); 기본동작 막기
                if (e.target == e.currentTarget){
                    $('.black-background').removeClass('slide-down').addClass('slide-up');
                }
            })
        </script>



        <!-- 우측 상단 메뉴 -->
        <div class='nav-menu nav-white'>
            <h4 style='margin: 0' class='large-logo'>Shirts Studio</h4>
            <a id='nav-sub-btn'>Products</a>
        </div>

        <!-- 메뉴 클릭시 나오는 메뉴 -->
        <ul class="list-group nav-sub">
            <li class="list-group-item">Outer</li>
            <li class="list-group-item">Innerwear</li>
            <li class="list-group-item">Shirts</li>
        </ul>

        <script>
            // 스크롤바를 내리면 => nav-menu의 background : white
            $(document).on('scroll', function() {
                // 만약에 지금 스크롤을 100px 했을 때
                if ($(window).scrollTop() > 100) {
                    $('.nav-menu').removeClass('nav-white').addClass('nav-black');
                    $('.nav-menu h4').removeClass('large-logo').addClass('small-logo');
                } else {
                    $('.nav-menu').removeClass('nav-black').addClass('nav-white');
                    $('.nav-menu h4').removeClass('small-logo').addClass('large-logo');
                }
            });
        </script>




        <!-- 메인 화면 -->
        <div class="jumbotron main-background">
            <h1 class="display-4">Shirts Studio</h1>
            <p class="lead">This is a simple hero unit, a simple jumbotron-style component for calling extra attention to featured content or information.</p>
            <hr class="my-4">
            <p>It uses utility classes for typography and spacing to space content out within the larger container.</p>
            <a class="btn btn-primary btn-lg" href="#" role="button" id='login'>Log In</a>
            <a class="btn btn-danger btn-lg" href="#" role="button" id='show-menu'>Show Menu</a>
        </div>
        



        <!-- 사진들 -->
        <div style="overflow: hidden; position: relative">
            <div class='slide-container'>
                <h4 class='my-4 text-center'>Showcase</h4>
                <div class='slide-box'>
                    <img src="img/1.jpg" alt="">
                </div>
                <div class='slide-box'>
                    <img src="img/2.jpg" alt="">
                </div>
                <div class='slide-box'>
                    <img src="img/3.jpg" alt="">
                </div>
            </div>
            <button id='before'>Before</button>
            <button id='next'>Next</button>
        </div>

        <button class='slide-1'>1</button>
        <button class='slide-2'>2</button>
        <button class='slide-3'>3</button>

        <div class='my-5'></div>



        <!-- 탭 -->
        <div class="container mt-5">
            <ul class="list">
                <li class="tab-button" data-id='0'>Products</li>
                <li class="tab-button active" data-id='1'>Information</li>
                <li class="tab-button" data-id='2'>Shipping</li>
            </ul>

            <div class="tab-content">
                <p>상품설명입니다.</p>
                <h4 id='title'>상품 제목</h4>
                <p id='text'>상품 내용</p>
                <div style="margin-bottom: 500px"></div>
            </div>
            <div class="tab-content show">
                <p>상품정보입니다.</p>
            </div>
            <div class="tab-content">
                <p>배송정보입니다.</p>
            </div>
        </div>

        <script src="tab.js"></script>

        <script>
            let photoState=1;
            $('#next').on('click', function() {
                if (photoState  < 3) {
                    $('.slide-container').removeClass('photo-'+photoState).addClass('photo-'+(photoState+1));
                    photoState++;
                }
            });

            $('#before').on('click', function() {
                if (photoState > 1){
                    $('.slide-container').removeClass('photo-'+photoState).addClass('photo-'+(photoState-1));
                    photoState--;
                }
            });

            $('.slide-1').on('click', function() {
                $('.slide-container').removeClass('photo-2 photo-3').addClass('photo-1');
                photoState = 1;
            });
            $('.slide-2').on('click', function() {
                $('.slide-container').removeClass('photo-1 photo-3').addClass('photo-2');
                photoState = 2;
            });
            $('.slide-3').on('click', function() {
                $('.slide-container').removeClass('photo-1 photo-2').addClass('photo-3');
                photoState = 3;
            });


            $('#show-menu').on('click', function() {
                $('.left-menu').animate({marginLeft: '0px'}, 600);
            });



            $('#login').on('click', function() {
                $('.black-background').removeClass('slide-up').addClass('slide-down');
            });

            $('#close').on('click', function() {
                $('.black-background').removeClass('slide-down').addClass('slide-up');
            });

            $('#nav-sub-btn').on('click', function() {
                $('.nav-sub').slideToggle();
            });

            // 이메일 input에 입력된 값이 빈칸인 경우,
            // 폼의 전송을 막음, 안내문 띄움.
            $('form').on('submit', function(e) {
                if ($('#email').val() == '' ){
                    e.preventDefault();
                    $('#email-alert').html('이메일이 빈칸입니다.').show();
                } else if (/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/.test($('#email').val()) == false) {
                    e.preventDefault();
                    $('#email-alert').html('이메일 형식이 틀렸습니다.').show();
                }
                if ($('#password').val() == '') {
                    e.preventDefault();
                    $('#pw-alert').show()
                } else if (/[A-Z]+/.test($('#password').val()) ) {
                    e.preventDefault();
                }
            });

            $('#email').on('input', function() {
                $('#email-alert').hide();
            });
            $('#password').on('input', function() {
                $('#pw-alert').hide();
            });

            let img = document.querySelectorAll('.slide-box img')[0];
            let manager = new Hammer.Manager(img);
            manager.add(new Hammer.Pan({threshold: 0}));

            manager.on('pan', function (e){
                console.log(e.deltaX);
                // 만약에 왼쪽으로 그림을 슬라이드 했을 때...
                if (e.deltaX < -1) {
                    $('.slide-container').css('transform', `translateX(${e.deltaX}px)`);
                    //이 사람이 마우스를 놓으면
                    // 두번째 사진으로 변해야함
                    if (e.isFinal && e.deltaX <= -75) {
                        $('.slide-container').addClass('transforming');
                        $('.slide-container').css('transform', 'translate(-100vw)');
                        photoState++;
                        setTimeout(function () {
                            $('.slide-container').removeClass('transforming');
                        }, 500);
                    } else if (e.isFinal){
                        $('.slide-container').addClass('transforming');
                        $('.slide-container').css('transform', 'translate(0vw)');
                        setTimeout(function () {
                            $('.slide-container').removeClass('transforming');
                        }, 500);
                    }
                }
            });
        </script>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/js/bootstrap.bundle.min.js" integrity="sha384-fQybjgWLrvvRgtW6bFlB7jaZrFsaBXjsOMm/tB9LTS58ONXgqbR9W8oWht/amnpF" crossorigin="anonymous"></script>
    </body>
</html>